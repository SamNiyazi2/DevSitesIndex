!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t){e.exports=angular},function(e,t,o){e.exports=o(2)},function(e,t,o){"use strict";o.r(t);var n,s,i,r,c,a,l=o(0),u=(n=function(){function e(){}return e.getInstance=function(t,o){return void 0===o&&(o=null),e.getInstance_Original(t,o)},e.getInstance_Original=function(t,o){void 0===o&&(o=null);var n=null,s=e.ssn_devsite_angular_module.filter((function(e){return e.name===t}));if(s.length>0)s.length>1&&(console.log("********************************************"),console.log("********************************************"),console.log("********************************************"),console.log("********************************************"),console.log("Globals - 20190923-0543 - 001 - Found application ["+t+"]  Instance count ["+s.length+"]"),console.log("********************************************"),console.log("********************************************"),console.log("********************************************"),console.log("********************************************")),n=s[0];else switch(t){case"timesheetApp":n={name:t,instance:l.module("timesheetApp",["ngRoute","ui.bootstrap"])},e.ssn_devsite_angular_module.push(n);break;case"demoSites_Index_Timesheet":n={name:t,instance:l.module("demoSites_Index_Timesheet",o)},e.ssn_devsite_angular_module.push(n);break;case"demoSites_Index":n={name:t,instance:l.module("demoSites_Index",o)},e.ssn_devsite_angular_module.push(n);break;default:console.log("Globals ************* No case for application name ["+t+"]  [20190920-0955] globals.ts")}return n.instance},e.ssn_devsite_angular_module=[],e}(),{getInstance:function(e,t){return void 0===t&&(t=null),n.getInstance(e,t)}}),d=((s=u.getInstance("timesheetApp")).controller("utilityController",["$scope","dataService",function(e,t){}]),s.directive("headerWithSort",(function(){return{restrict:"A",templateUrl:"/js/Util/headerWithSort.html",scope:{columnlist:"=columnlist",sortmethod:"&"},link:function(e,t,o){e.sort=function(){console.log("headerWithSort - 20190921-0613 - "),e.sortmethod()}}}})),(i=u.getInstance("timesheetApp")).controller("utilityController",["$scope","dataService",function(e,t){}]),i.directive("pagingDirective",["$timeout",function(e){return{restrict:"A",templateUrl:"/js/Util/pagingDirective.html",scope:{pagingmethod:"&",databag:"=",sqlstatsrecord:"="},link:function(t,o,n){function s(){return Math.ceil(t.sqlstatsrecord.totalRecordCount/t.sqlstatsrecord.recordsPerPage)}function i(){var o=s();t.previousdisabled=t.sqlstatsrecord.currentPageNo<=1,t.nextdisabled=t.sqlstatsrecord.currentPageNo>=o,t.sayWhatPageWeAreOn=o>0?"Page "+t.sqlstatsrecord.currentPageNo+" of "+o:"No records.",e(t.init101,1e3)}t.sayWhatPageWeAreOn="",t.init101=function(){i()},t.onPrevious=function(){this.sqlstatsrecord.currentPageNo=this.sqlstatsrecord.currentPageNo>1?this.sqlstatsrecord.currentPageNo-1:1,t.pagingmethod(),i()},t.onNext=function(){var e=s();this.sqlstatsrecord.currentPageNo=this.sqlstatsrecord.currentPageNo<e?this.sqlstatsrecord.currentPageNo+1:e,t.pagingmethod(),i()},t.init101()}}}]),{doSetup:function(e){u.getInstance(e).factory("dataService",["$http","$q",function(e,t){var o=[];return{devSites:ko.observable(o),getDevSites:function(){var n=t.defer();return e.get("/api/demositesapi").then((function(e){l.copy(e.data,o),n.resolve()}),(function(){n.reject()})),n.promise},addDevSite:function(o){var n=t.defer();return e.post("/api/demositesapi",o).then((function(e){n.resolve(e.data)}),(function(){n.reject()})),n.promise},updateDevSite:function(o){var n=t.defer();return e.post("/api/demositesapi",o).then((function(e){n.resolve(e.data)}),(function(){n.reject()})),n.promise},insertTimeLog:function(o){var n=t.defer();return e.post("/api/timeLogAPI",o).then((function(e){n.resolve(e.data)}),(function(e){n.reject(e)})),n.promise},getTimelog:function(o){var n=t.defer();return e.get("/api/timelogapi/get_custom/"+o).then((function(e){n.resolve(e.data)}),(function(e){n.reject({Error:"Failed call to get timelog [20190829-1819]"})})),n.promise},updateTimeLog:function(o){var n=t.defer();return e.post("/api/timeLogAPI",o).then((function(e){n.resolve(e.data)}),(function(e){n.reject(e)})),n.promise},getJobs:function(o){var n=t.defer(),s=0==o.job_statuses_selected.length?"nothing-201909221117":o.job_statuses_selected.join(",");return e.get("/api/jobapi/list/"+o.currentPageNo+"/"+o.recordsPerPage+"/"+o.columnName+"/"+o.desc+"/"+s).then((function(e){n.resolve(e.data)}),(function(e){n.reject({Error:"Failed call to get jobs [20190917-0057]"})})),n.promise},getJob_Statuses:function(){var o=t.defer();return e.get("/api/job_statusAPI/").then((function(e){o.resolve(e.data)}),(function(e){o.reject({Error:"Failed call to get job_statuses [20190921-1326"})})),o.promise}}}])}}),p=((r=u.getInstance("timesheetApp")).controller("utilityController",["$scope","dataService",function(e,t){}]),r.directive("jobStatusOption",(function(){return{restrict:"A",templateUrl:"/js/jobs/jobStatus.html",scope:{entry:"=",checkedfunction:"&",jobstatusesselected102:"="},link:function(e,t,o){e.job_status_click=function(e){this.checkedfunction()},e.job_status_checked=function(e){return this.jobstatusesselected102.indexOf(e.id)>-1}}}})),u.getInstance("timesheetApp").directive("jobStatusDisplay",(function(){return{link:function(e,t,o){e.$watch(o.jobStatus,(function(e,o){var n="";n="1"==e?"job_status_open_1":"2"==e?"job_status_Pending_2":"3"==e?"job_status_Completed_3":"job_status_Cancelled_4",t.removeClass("job_status_open_1 job_status_Pending_2 job_status_Completed_3 job_status_Cancelled_4"),t.addClass(n)}))}}})),function(){return(p=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var s in t=arguments[o])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)});(c=u.getInstance("timesheetApp")).controller("jobsIndexController",["$scope","$http","$q","dataService","$timeout","$sce","$uibModal",function(e,t,o,n,s,i,r){e.job_statuses_selected=[1];var c={columnName:"dateAdded",columnNameSelected:"dateAdded",currentPageNo:1,desc:!0,recordsPerPage:4,totalRecordCount:0,caption:"Date Added",job_statuses_selected:[e.job_statuses_selected]},a=[p({},c,{columnName:"projectTitle_ForActivity",caption:"Project Title"}),p({},c,{columnName:"jobTitle",caption:"Job Title"}),p({},c,{columnName:"dateAdded",caption:"Date Added"}),p({},c,{columnName:"dateUpdated",caption:"Date Updated"}),p({},c,{columnName:"activityAge",caption:"Activity Age"})];function l(t){n.getJobs(t).then((function(t){e.databag={jobs:t.dataList,column:t.columnName,desc:t.desc},t.sqlStatsRecord.job_statuses_selected=t.sqlStatsRecord.job_statuses_selected.split(","),e.sqlStatsRecord=t.sqlStatsRecord;var o=e.fieldsList.findIndex((function(e){return e.column===t.columnName}));o>-1&&(e.fieldsList[o].desc=t.desc)}),(function(e){})).catch((function(e){}))}e.fieldsList=a,l(c),e.sortMethod101=function(e){e.columnName!=e.columnNameSelected?e.columnNameSelected=e.columnName:e.desc=!e.desc,l(e)},e.pagingmethod101=function(t){l(t),e.sqlStatsRecord=t},e.job_status_changed101=function(t){var o=e.job_statuses_selected.indexOf(t.id);o>-1?e.job_statuses_selected.splice(o,1):e.job_statuses_selected[e.job_statuses_selected.length]=t.id,e.sqlStatsRecord&&(e.sqlStatsRecord.job_statuses_selected=e.job_statuses_selected),c.job_statuses_selected=e.sqlStatsRecord.job_statuses_selected,l(c)},e.job_statuses_checkAll=function(t){e.job_statuses_selected=t?e.job_statuses.map((function(e){return e.id})):[],c.job_statuses_selected=e.job_statuses_selected,l(c)},e.showCreateTimesheetForm=function(e){console.log("JobIndexController - 20190930-1651 CCCCC - showCreateTimesheetForm "),isNaN(e)&&(e=0),r.open({templateUrl:"/js/timesheet/templates/timesheetTemplate.html",controller:"TimesheetController",backdrop:!1,resolve:{jobId:function(){return e}}})},n.getJob_Statuses().then((function(t){e.job_statuses=t}),(function(e){console.log("JobIndexController -  20190922-0758 - Data error ?????????????????????????????"),console.log(e)})).catch((function(e){console.log("JobIndexController -  20190922-0758 - Data error (catch) ?????????????????????????????"),console.log(e)}))}]),(a=u.getInstance("timesheetApp")).controller("TimesheetController",["$scope","$uibModalInstance","$http","$q","dataService",function(e,t,o,n,s,i){e.disciplineSelected={id:0,title:""},e.pageTitle="Clock-in";var r=new Date;r.setMilliseconds(0),e.timeLog={timeLogId:0,id:0,startTime:r,workDetail:"",disciplineId:"2",jobId:i},e.editableTimeLog=l.copy(e.timeLog),e.submitForm=function(){e.editableTimeLog;var o=null;e.editableTimeLog.disciplineId=e.disciplineSelected.id,(o=0===e.editableTimeLog.id?s.insertTimeLog(e.editableTimeLog):s.updateTimeLog(e.editableTimeLog))&&o.then((function(t){e.timeLog=l.copy(e.editableTimeLog)}),(function(e){console.log("TimesheetController - 20190921-0640 - promise > error"),console.log(e)})),t.close(),toastr.info("Clocked-in")},e.cancelForm=function(){t.dismiss()},e.getDisciplines=function(e){null===e&&(e="");var t=n.defer();return o({method:"GET",url:"/api/DisciplineAPI"}).then((function(o){var n=[];console.log("angular - forEach - 20190920-0720-o"),l.forEach(o.data,(function(t){t.disciplineShort.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push({id:t.disciplineId,title:t.disciplineShort})})),t.resolve(n)}),(function(e){t.reject(e)})),t.promise}}]);d.doSetup("timesheetApp")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYW5ndWxhclwiIiwid2VicGFjazovLy8uL2dsb2JhbHMudHMiLCJ3ZWJwYWNrOi8vLy4vVXRpbC9IZWFkZXJXaXRoU29ydC50cyIsIndlYnBhY2s6Ly8vLi9VdGlsL3BhZ2luZ0RpcmVjdGl2ZS50cyIsIndlYnBhY2s6Ly8vLi9qb2JzL0pvYlN0YXR1c0RpcmVjdGl2ZS50cyIsIndlYnBhY2s6Ly8vLi9Kb2JzL0pvYnNJbmRleENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vVGltZXNoZWV0L1RpbWVzaGVldENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vRGF0YVNlcnZpY2VzLnRzIiwid2VicGFjazovLy8uL1V0aWwvSm9iU3RhdHVzRGlzcGxheURpcmVjdGl2ZS50cyIsIndlYnBhY2s6Ly8vLi9qb2JzL0pvYnNJbmRleF9tYWluLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYW5ndWxhciIsImhlYWRlcldpdGhTb3J0X2FuZ3VsYXJfbW9kdWxlIiwicGFnaW5nRGlyZWN0aXZlX2FuZ3VsYXJfbW9kdWxlIiwiSm9iX1N0YXR1c19Bbmd1bGFyX01vZHVsZSIsIkpvYnNfQW5ndWxhcl9Nb2R1bGUiLCJ0aW1lc2hlZXRBcHAiLCJnbG9iYWxzX2luc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJhcHBsaWNhdGlvbk5hbWUiLCJhcmdzIiwiU1NOX0dsb2JhbHMiLCJnZXRJbnN0YW5jZV9PcmlnaW5hbCIsImFuZ3VsYXJBcHAiLCJzZWxlY3RlZCIsInNzbl9kZXZzaXRlX2FuZ3VsYXJfbW9kdWxlIiwiZmlsdGVyIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsImluc3RhbmNlIiwicHVzaCIsImRhdGFTZXJ2aWNlX2luc3RhbmNlIiwiY29udHJvbGxlciIsIiRzY29wZSIsImRhdGFTZXJ2aWNlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsInNjb3BlIiwiY29sdW1ubGlzdCIsInNvcnRtZXRob2QiLCJsaW5rIiwiZWwiLCJhdHRycyIsInNvcnQiLCIkdGltZW91dCIsInBhZ2luZ21ldGhvZCIsImRhdGFiYWciLCJzcWxzdGF0c3JlY29yZCIsImdldFRvdGFsUGFnZUNvdW50IiwiTWF0aCIsImNlaWwiLCJ0b3RhbFJlY29yZENvdW50IiwicmVjb3Jkc1BlclBhZ2UiLCJzZXR1cEJ1dHRvbnMiLCJ0b3RhbFBhZ2VDb3VudCIsInByZXZpb3VzZGlzYWJsZWQiLCJjdXJyZW50UGFnZU5vIiwibmV4dGRpc2FibGVkIiwic2F5V2hhdFBhZ2VXZUFyZU9uIiwiaW5pdDEwMSIsIm9uUHJldmlvdXMiLCJ0aGlzIiwib25OZXh0IiwiZG9TZXR1cCIsImN1cnJlbnRBcHBsaWNhdGlvbiIsImZhY3RvcnkiLCIkaHR0cCIsIiRxIiwiX2RldlNpdGVzIiwiZGV2U2l0ZXMiLCJrbyIsIm9ic2VydmFibGUiLCJnZXREZXZTaXRlcyIsImRlZmVycmVkIiwiZGVmZXIiLCJ0aGVuIiwicmVzdWx0IiwiZGF0YSIsInJlc29sdmUiLCJyZWplY3QiLCJwcm9taXNlIiwiYWRkRGV2U2l0ZSIsImRldlNpdGUiLCJwb3N0IiwidXBkYXRlRGV2U2l0ZSIsImluc2VydFRpbWVMb2ciLCJ0aW1lTG9nIiwiZXJyb3IiLCJnZXRUaW1lbG9nIiwiaWQiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsInVwZGF0ZVRpbWVMb2ciLCJnZXRKb2JzIiwiY29sdW1uQmFnIiwiam9iX3N0YXR1c2VzX3NlbGVjdGVkIiwiam9pbiIsImNvbHVtbk5hbWUiLCJkZXNjIiwiZ2V0Sm9iX1N0YXR1c2VzIiwiZW50cnkiLCJjaGVja2VkZnVuY3Rpb24iLCJqb2JzdGF0dXNlc3NlbGVjdGVkMTAyIiwiam9iX3N0YXR1c19jbGljayIsImpvYl9zdGF0dXNfY2hlY2tlZCIsImluZGV4T2YiLCIkd2F0Y2giLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiY2xhc3NOYW1lIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIiRzY2UiLCIkdWliTW9kYWwiLCJjb2x1bW5OYW1lU2VsZWN0ZWQiLCJjYXB0aW9uIiwiX2ZpZWxkTGlzdCIsImdldEpvYnNMaXN0Iiwiam9icyIsImRhdGFMaXN0IiwiY29sdW1uIiwic3FsU3RhdHNSZWNvcmQiLCJzcGxpdCIsImN1cnJlbnRDb2x1bW5JbmRleCIsImZpZWxkc0xpc3QiLCJmaW5kSW5kZXgiLCJzb3J0TWV0aG9kMTAxIiwicGFnaW5nbWV0aG9kMTAxIiwiam9iX3N0YXR1c19jaGFuZ2VkMTAxIiwiam9iX3N0YXR1cyIsImluZGV4T2ZTZWxlY3RlZEl0ZW0iLCJzcGxpY2UiLCJqb2Jfc3RhdHVzZXNfY2hlY2tBbGwiLCJlbmFibGUiLCJqb2Jfc3RhdHVzZXMiLCJtYXAiLCJzaG93Q3JlYXRlVGltZXNoZWV0Rm9ybSIsImpvYklEIiwiaXNOYU4iLCJvcGVuIiwiYmFja2Ryb3AiLCJqb2JJZCIsIiR1aWJNb2RhbEluc3RhbmNlIiwiZGlzY2lwbGluZVNlbGVjdGVkIiwidGl0bGUiLCJwYWdlVGl0bGUiLCJ0aW1lTm93IiwiRGF0ZSIsInNldE1pbGxpc2Vjb25kcyIsInRpbWVMb2dJZCIsInN0YXJ0VGltZSIsIndvcmtEZXRhaWwiLCJkaXNjaXBsaW5lSWQiLCJlZGl0YWJsZVRpbWVMb2ciLCJzdWJtaXRGb3JtIiwiY2xvc2UiLCJ0b2FzdHIiLCJpbmZvIiwiY2FuY2VsRm9ybSIsImRpc21pc3MiLCJnZXREaXNjaXBsaW5lcyIsImxvb2t1cFZhbHVlIiwibWV0aG9kIiwidXJsIiwicmVzcG9uc2UiLCJhZGRyZXNzZXMiLCJpdGVtIiwiZGlzY2lwbGluZVNob3J0IiwidG9Mb3dlckNhc2UiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxH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SCxvQkFFekMsU0FBVWxFLEdBR043RCxRQUFRQyxJQUFJLHlEQUNaRCxRQUFRQyxJQUFJNEQsTUFNeEJ1RCxFQUFrQmEsUUFFbEJDLE9BQU9DLEtBQUssZUFNaEI3SCxFQUFPOEgsV0FBYSxXQUdoQmhCLEVBQWtCaUIsV0FRdEIvSCxFQUFPZ0ksZUFBaUIsU0FBVUMsR0FFVixPQUFoQkEsSUFBc0JBLEVBQWMsSUFFeEMsSUFBSXhGLEVBQVdOLEVBQUdPLFFBV2xCLE9BTkFSLEVBQU0sQ0FDRmdHLE9BQVEsTUFDUkMsSUFBSyx1QkFFTnhGLE1BSUgsU0FBb0N5RixHQUVoQyxJQUFJQyxFQUFZLEdBSWhCM0ksUUFBUUMsSUFBSSx1Q0FJWixVQUFnQnlJLEVBQVN2RixNQUNyQixTQUFVeUYsR0FFRkEsRUFBS0MsZ0JBQWdCQyxjQUFjL0QsUUFBUXdELEVBQVlPLGdCQUFrQixHQUN6RUgsRUFBVXhJLEtBQUssQ0FBRTRELEdBQUk2RSxFQUFLZCxhQUFjUixNQUFPc0IsRUFBS0MscUJBS2hFOUYsRUFBU0ssUUFBUXVGLE1BSXJCLFNBQWtDRCxHQUU5QjNGLEVBQVNNLE9BQU9xRixNQTNCYjNGLEVBQVNPLFlHbkdoQ2xELEVBQXFCaUMsUUFBUSIsImZpbGUiOiJidW5kbGVfam9ic0luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBhbmd1bGFyOyIsIu+7v1xyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vbm9kZV9tb2R1bGVzL0B0eXBlcy9hbmd1bGFyL2luZGV4LmQudHNcIiAvPlxyXG5cclxuXHJcbi8vIDA5LzE4LzIwMTkgMTA6MzMgYW0gLSBTU04gLSBbMjAxOTA5MTgtMDk0M10gLSBbMDA2XSAtIEFkZGluZyBqb2Igc3RhdHVzIG9wdGlvbiB0byBpbmRleFxyXG5cclxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTUzMjQ1MTAvaG93LXRvLW1ha2UtYS1zaW5nbGV0b24taW4tdHlwZXNjcmlwdC13b3JrLWFjcm9zcy1tdWx0aXBsZS1tb2R1bGVzXHJcblxyXG5cclxuaW1wb3J0IElBbmd1bGFyQXBwIGZyb20gJy4vSUFuZ3VsYXJBcHAnO1xyXG5cclxuaW1wb3J0ICogYXMgYW5ndWxhciBmcm9tIFwiYW5ndWxhclwiO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbnZhciBnbG9iYWxzX2luc3RhbmNlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICBjbGFzcyBTU05fR2xvYmFscyB7XHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzc25fZGV2c2l0ZV9hbmd1bGFyX21vZHVsZTogSUFuZ3VsYXJBcHBbXSA9IFtdOyAvL2FuZ3VsYXIuSU1vZHVsZVtdO1xyXG5cclxuICAgICAgICAvLyAwOS8yMy8yMDE5IDA2OjEzIGFtIC0gU1NOIC0gWzIwMTkwOTIzLTA2MTNdIC0gWzAwMV0gLSBBZGRpbmcgYSBsb2NrXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoYXBwbGljYXRpb25OYW1lOiBzdHJpbmcsIGFyZ3M6IHN0cmluZ1tdID0gbnVsbCk6IGFuZ3VsYXIuSU1vZHVsZSB7XHJcblxyXG4gICAgICAgICAgICAvLy8vICBETyBOT1QgUkVNT1ZFLlxyXG4gICAgICAgICAgICAvLy8vIE9wdGlvbiB0byBjYWxsIGFuIGluamVjdGVkIEFuZ3VsYXJKUyBzZXJ2ZXIgZnJvbSBoZXJlLiBUZXN0ZWQuICBcclxuXHJcbiAgICAgICAgICAgIC8vZmFjdG9yeVNldHVwLmRvRmFjdG9yeVNldHVwKCk7XHJcblxyXG4gICAgICAgICAgICAvL3RyeSB7XHJcblxyXG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLmxvZyhcImdsb2JhbHM6IDIwMTkwOTIzLTExMzYgLSBDYWxsaW5nIHRlc3RfMTAyXCIpO1xyXG4gICAgICAgICAgICAvLyAgICB0ZXN0XzEwMy5kb0l0KCk7XHJcbiAgICAgICAgICAgIC8vfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLmVycm9yKFwiZ2xvYmFsczogIDIwMTkwOTIzLTExMzUgLSBGYWlsZWQgY2FsbCB0byB0ZXN0XzEwMlwiKTtcclxuICAgICAgICAgICAgLy8gICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU1NOX0dsb2JhbHMuZ2V0SW5zdGFuY2VfT3JpZ2luYWwoYXBwbGljYXRpb25OYW1lLCBhcmdzKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZV9PcmlnaW5hbChhcHBsaWNhdGlvbk5hbWU6IHN0cmluZywgYXJnczogc3RyaW5nW10gPSBudWxsKSB7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGFuZ3VsYXJBcHA6IElBbmd1bGFyQXBwID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IChTU05fR2xvYmFscy5zc25fZGV2c2l0ZV9hbmd1bGFyX21vZHVsZSkuZmlsdGVyKChyOiBJQW5ndWxhckFwcCkgPT4gci5uYW1lID09PSBhcHBsaWNhdGlvbk5hbWUpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPiAxKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR2xvYmFscyAtIDIwMTkwOTIzLTA1NDMgLSAwMDEgLSBGb3VuZCBhcHBsaWNhdGlvbiBbXCIgKyBhcHBsaWNhdGlvbk5hbWUgKyBcIl0gIEluc3RhbmNlIGNvdW50IFtcIiArIHNlbGVjdGVkLmxlbmd0aCArIFwiXVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyQXBwID0gc2VsZWN0ZWRbMF07XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXBwbGljYXRpb25OYW1lKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWVzaGVldEFwcCc6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyQXBwID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYXBwbGljYXRpb25OYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IGFuZ3VsYXIubW9kdWxlKCd0aW1lc2hlZXRBcHAnLCBbJ25nUm91dGUnLCAndWkuYm9vdHN0cmFwJ10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNTTl9HbG9iYWxzLnNzbl9kZXZzaXRlX2FuZ3VsYXJfbW9kdWxlLnB1c2goYW5ndWxhckFwcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVtb1NpdGVzX0luZGV4X1RpbWVzaGVldCc6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyQXBwID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYXBwbGljYXRpb25OYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IGFuZ3VsYXIubW9kdWxlKCdkZW1vU2l0ZXNfSW5kZXhfVGltZXNoZWV0JywgYXJncylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgU1NOX0dsb2JhbHMuc3NuX2RldnNpdGVfYW5ndWxhcl9tb2R1bGUucHVzaChhbmd1bGFyQXBwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVtb1NpdGVzX0luZGV4JzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXJBcHAgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhcHBsaWNhdGlvbk5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogYW5ndWxhci5tb2R1bGUoXCJkZW1vU2l0ZXNfSW5kZXhcIiwgYXJncylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgU1NOX0dsb2JhbHMuc3NuX2RldnNpdGVfYW5ndWxhcl9tb2R1bGUucHVzaChhbmd1bGFyQXBwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHbG9iYWxzICoqKioqKioqKioqKiogTm8gY2FzZSBmb3IgYXBwbGljYXRpb24gbmFtZSBbXCIgKyBhcHBsaWNhdGlvbk5hbWUgKyBcIl0gIFsyMDE5MDkyMC0wOTU1XSBnbG9iYWxzLnRzXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXJBcHAuaW5zdGFuY2U7XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB2YXIgZmFjdG9yeVNldHVwID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGRvRmFjdG9yeVNldHVwID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGFwcF9nbG9iYWxzO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGFwcF9nbG9iYWxzID0gYW5ndWxhci5tb2R1bGUoJ2dsb2JhbEFuZ3VsYXJBcHAnKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG5cclxuICAgICAgICAgICAgICAgIGFwcF9nbG9iYWxzID0gYW5ndWxhci5tb2R1bGUoJ2dsb2JhbEFuZ3VsYXJBcHAnLCBbXSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgYXBwX2dsb2JhbHMuZmFjdG9yeShcImdsb2JhbEFuZ3VsYXJBcHBVdGlsXCIsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkb1Rlc3QxMDEgPSBmdW5jdGlvbiAobmFtZVBhc3NlZEluKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHTE9CQUxTIC0gYXN5bmNHcmVldCAtIDQ1Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5ub3RpZnkoJ0Fib3V0IHRvIGdyZWV0ICcgKyBuYW1lUGFzc2VkSW4gKyAnLicpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChva1RvR3JlZXQobmFtZVBhc3NlZEluKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dMT0JBTFMgLSBhc3luY0dyZWV0IC0gNTAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0hlbGxvLCAnICsgbmFtZVBhc3NlZEluICsgJyEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHTE9CQUxTIC0gYXN5bmNHcmVldCAtIDUzJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdHcmVldGluZyAnICsgbmFtZVBhc3NlZEluICsgJyBpcyBub3QgYWxsb3dlZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBva1RvR3JlZXQobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkb1Rlc3QxMDE6IGRvVGVzdDEwMVxyXG5cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZG9GYWN0b3J5U2V0dXA6IGRvRmFjdG9yeVNldHVwXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuXHJcbiAgICB9KCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgLy8gMDkvMjAvMjAxOSAwOTozOCBhbSAtIFNTTiAtIFBhc3MgaW4gYXJnc1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEluc3RhbmNlKGFwcGxpY2F0aW9uTmFtZTogc3RyaW5nLCBhcmdzOiBzdHJpbmdbXSA9IG51bGwpOiBhbmd1bGFyLklNb2R1bGUge1xyXG5cclxuICAgICAgICByZXR1cm4gU1NOX0dsb2JhbHMuZ2V0SW5zdGFuY2UoYXBwbGljYXRpb25OYW1lLCBhcmdzKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgIGdldEluc3RhbmNlOiBnZXRJbnN0YW5jZVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG59KCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxudmFyIHRlc3RfMTAzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICB2YXIgZG9JdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgICAgIGFuZ3VsYXIuaW5qZWN0b3IoWyduZycsICdnbG9iYWxBbmd1bGFyQXBwJ10pLmludm9rZShbJ2dsb2JhbEFuZ3VsYXJBcHBVdGlsJywgZnVuY3Rpb24gKGdsb2JhbEFuZ3VsYXJBcHBVdGlsKSB7XHJcblxyXG4gICAgICAgICAgICBnbG9iYWxBbmd1bGFyQXBwVXRpbC5kb1Rlc3QxMDEoJ05hbWUgcGFzc2VkIHRvIGRvVGVzdDEwMScpLnRoZW4oZG9UZXN0MTAxU3VjY2VzcywgZG9UZXN0MTAxRXJyb3IpLmNhdGNoKGRvVGVzdDEwMUNhdGNoKTtcclxuXHJcbiAgICAgICAgfV0pO1xyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9UZXN0MTAxU3VjY2VzcyhyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dsb2JhbHMgLSBkb1Rlc3QxMDFTdWNjZXNzIC0gMjAxOTA5MjQtMDMxNiAnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9UZXN0MTAxRXJyb3IocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dsb2JhbHMgLSBkb1Rlc3QxMDFFcnJvciAtIDIwMTkwOTI0LTAzMTYtQiAnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9UZXN0MTAxQ2F0Y2gocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dsb2JhbHMgLSBkb1Rlc3QxMDFDYXRjaCAtIDIwMTkwOTI0LTAzMTYtQycpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkb0l0OiBkb0l0XHJcbiAgICB9O1xyXG5cclxuXHJcbn0oKTtcclxuXHJcblxyXG5leHBvcnQgeyBnbG9iYWxzX2luc3RhbmNlIH07XHJcblxyXG5leHBvcnQgeyB0ZXN0XzEwMyB9O1xyXG5cclxuIiwi77u/XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHR5cGVzL2FuZ3VsYXIvaW5kZXguZC50c1wiIC8+XHJcblxyXG5cclxuLy8gMDkvMTcvMjAxOSAwMjowNCBhbSAtIFNTTiAtIFsyMDE5MDkxNi0xMTIzXSAtIFswMThdIC0gQWRkaW5nIGpvYiBzdGF0dXNcclxuXHJcblxyXG5pbXBvcnQgKiBhcyBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInXHJcblxyXG5pbXBvcnQgKiBhcyBzc25fZ2xvYmFscyBmcm9tIFwiLi4vZ2xvYmFsc1wiO1xyXG5cclxuXHJcbmludGVyZmFjZSBpRml4U2NvcGUgZXh0ZW5kcyBuZy5JU2NvcGUge1xyXG5cclxuICAgIHNvcnQoKTogYW55LFxyXG4gICAgc29ydG1ldGhvZCgpOiBhbnlcclxufVxyXG5cclxuXHJcblxyXG4vLyAwOS8yMS8yMDE5IDA1OjIxIGFtIC0gU1NOIC0gWzIwMTkwOTIxLTAzNTddIC0gWzAwN10gLSBDcmVhdGluZyBtdWx0aXBsZSBlbnRyeSBmb3IgV2VicGFja1xyXG5cclxuXHJcbnZhciBoZWFkZXJXaXRoU29ydF9pbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgdmFyIGhlYWRlcldpdGhTb3J0X2FuZ3VsYXJfbW9kdWxlOiBhbmd1bGFyLklNb2R1bGUgPSBzc25fZ2xvYmFscy5nbG9iYWxzX2luc3RhbmNlLmdldEluc3RhbmNlKFwidGltZXNoZWV0QXBwXCIpO1xyXG5cclxuXHJcbiAgICBoZWFkZXJXaXRoU29ydF9hbmd1bGFyX21vZHVsZS5jb250cm9sbGVyKCd1dGlsaXR5Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ2RhdGFTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgZGF0YVNlcnZpY2UpIHtcclxuICAgICAgICAgXHJcbiAgICB9XSk7XHJcblxyXG5cclxuICAgIGhlYWRlcldpdGhTb3J0X2FuZ3VsYXJfbW9kdWxlLmRpcmVjdGl2ZSgnaGVhZGVyV2l0aFNvcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgICAgICByZXN0cmljdDogXCJBXCIsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi9qcy9VdGlsL2hlYWRlcldpdGhTb3J0Lmh0bWxcIixcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbmxpc3Q6IFwiPWNvbHVtbmxpc3RcIiwgc29ydG1ldGhvZDogXCImXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZTogaUZpeFNjb3BlICwgZWwsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzY29wZS5zb3J0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaGVhZGVyV2l0aFNvcnQgLSAyMDE5MDkyMS0wNjEzIC0gXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNvcnRtZXRob2QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFkZXJXaXRoU29ydF9hbmd1bGFyX21vZHVsZTogaGVhZGVyV2l0aFNvcnRfYW5ndWxhcl9tb2R1bGVcclxuICAgIH07XHJcblxyXG5cclxufSgpO1xyXG5cclxuZXhwb3J0IHsgaGVhZGVyV2l0aFNvcnRfaW5zdGFuY2UgfTtcclxuXHJcbiIsIu+7v1xyXG4vLyAwOS8xNy8yMDE5IDA5OjMxIGFtIC0gU1NOIC0gWzIwMTkwOTE3LTA5MjldIC0gWzAwMV0gLSBBZGRpbmcgcGFnaW5nIGZvciBhbmd1bGFyIGxpc3RzXHJcblxyXG5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdHlwZXMvanF1ZXJ5L2pxdWVyeS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdHlwZXMvYW5ndWxhci9pbmRleC5kLnRzXCIgLz5cclxuXHJcblxyXG4vLyAwOS8xOS8yMDE5IDA0OjIxIGFtIC0gU1NOIC0gWzIwMTkwOTE5LTAzNTRdIC0gWzAwNV0gLSBQdXR0aW5nIHRoaW5ncyBiYWNrIC0gQ2xlYW51cCBmcm9tIGltcGxlbWVudGluZyBBTUQgLSBBZGRpbmcgdHNjb25maWcuanNvbiAgICAgXCJhbHdheXNTdHJpY3RcIjogdHJ1ZSxcclxuLy9pbXBvcnQgYW5ndWxhciAgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcblxyXG5pbnRlcmZhY2UgaUZpeFNjb3BlIGV4dGVuZHMgbmcuSVNjb3BlIHtcclxuXHJcbiAgICBpbml0MTAxKCk6IGFueSxcclxuICAgIHByZXZpb3VzZGlzYWJsZWQ6IGJvb2xlYW4sXHJcbiAgICBuZXh0ZGlzYWJsZWQ6IGJvb2xlYW4sXHJcbiAgICBzYXlXaGF0UGFnZVdlQXJlT246IHN0cmluZyxcclxuICAgIHNxbHN0YXRzcmVjb3JkOiBhbnksXHJcbiAgICBvbk5leHQoKTogYW55LFxyXG4gICAgb25QcmV2aW91cygpOiBhbnksXHJcbiAgICBwYWdpbmdtZXRob2QoKTogYW55XHJcblxyXG59XHJcblxyXG5cclxuaW1wb3J0ICogYXMgYW5ndWxhciBmcm9tICdhbmd1bGFyJ1xyXG5pbXBvcnQgKiBhcyBzc25fZ2xvYmFscyBmcm9tICcuLi9nbG9iYWxzJztcclxuXHJcblxyXG5cclxuXHJcbi8vIDA5LzIxLzIwMTkgMDU6MDcgYW0gLSBTU04gLSBbMjAxOTA5MjEtMDM1N10gLSBbMDA0XSAtIENyZWF0aW5nIG11bHRpcGxlIGVudHJ5IGZvciBXZWJwYWNrXHJcblxyXG52YXIgcGFnaW5nRGlyZWN0aXZlX2luc3RhbmNlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcblxyXG4gICAgdmFyIHBhZ2luZ0RpcmVjdGl2ZV9hbmd1bGFyX21vZHVsZTogYW5ndWxhci5JTW9kdWxlID0gc3NuX2dsb2JhbHMuZ2xvYmFsc19pbnN0YW5jZS5nZXRJbnN0YW5jZShcInRpbWVzaGVldEFwcFwiKTtcclxuXHJcbiAgICBwYWdpbmdEaXJlY3RpdmVfYW5ndWxhcl9tb2R1bGUuY29udHJvbGxlcigndXRpbGl0eUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdkYXRhU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGRhdGFTZXJ2aWNlKSB7XHJcblxyXG5cclxuICAgIH1dKTtcclxuXHJcblxyXG4gICAgcGFnaW5nRGlyZWN0aXZlX2FuZ3VsYXJfbW9kdWxlLmRpcmVjdGl2ZSgncGFnaW5nRGlyZWN0aXZlJywgWyckdGltZW91dCcsIGZ1bmN0aW9uICgkdGltZW91dCkge1xyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkFcIixcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiL2pzL1V0aWwvcGFnaW5nRGlyZWN0aXZlLmh0bWxcIixcclxuXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBwYWdpbmdtZXRob2Q6IFwiJlwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YWJhZzogXCI9XCIsXHJcbiAgICAgICAgICAgICAgICBzcWxzdGF0c3JlY29yZDogXCI9XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZTogaUZpeFNjb3BlLCBlbCwgYXR0cnMpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuc2F5V2hhdFBhZ2VXZUFyZU9uID0gXCJcIjtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuaW5pdDEwMSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dXBCdXR0b25zKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VG90YWxQYWdlQ291bnQoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoc2NvcGUuc3Fsc3RhdHNyZWNvcmQudG90YWxSZWNvcmRDb3VudCAvIHNjb3BlLnNxbHN0YXRzcmVjb3JkLnJlY29yZHNQZXJQYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBCdXR0b25zKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWxQYWdlQ291bnQgPSBnZXRUb3RhbFBhZ2VDb3VudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5wcmV2aW91c2Rpc2FibGVkID0gc2NvcGUuc3Fsc3RhdHNyZWNvcmQuY3VycmVudFBhZ2VObyA8PSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLm5leHRkaXNhYmxlZCA9IHNjb3BlLnNxbHN0YXRzcmVjb3JkLmN1cnJlbnRQYWdlTm8gPj0gdG90YWxQYWdlQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbFBhZ2VDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2F5V2hhdFBhZ2VXZUFyZU9uID0gXCJQYWdlIFwiICsgc2NvcGUuc3Fsc3RhdHNyZWNvcmQuY3VycmVudFBhZ2VObyArIFwiIG9mIFwiICsgdG90YWxQYWdlQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2F5V2hhdFBhZ2VXZUFyZU9uID0gXCJObyByZWNvcmRzLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoc2NvcGUuaW5pdDEwMSwgMTAwMCk7IC8vIHRvIHBpY2t1cCBhY3R1YWwgdmFsdWVzIGFmdGVyIEFQSSBjYWxsIHRvIGdldCBkYXRhLCBqdXN0IGluIGNhc2UhISFcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUub25QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Fsc3RhdHNyZWNvcmQuY3VycmVudFBhZ2VObyA9IHRoaXMuc3Fsc3RhdHNyZWNvcmQuY3VycmVudFBhZ2VObyA+IDEgPyB0aGlzLnNxbHN0YXRzcmVjb3JkLmN1cnJlbnRQYWdlTm8gLSAxIDogMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUucGFnaW5nbWV0aG9kKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldHVwQnV0dG9ucygpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUub25OZXh0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsUGFnZUNvdW50ID0gZ2V0VG90YWxQYWdlQ291bnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcWxzdGF0c3JlY29yZC5jdXJyZW50UGFnZU5vID0gdGhpcy5zcWxzdGF0c3JlY29yZC5jdXJyZW50UGFnZU5vIDwgdG90YWxQYWdlQ291bnQgPyB0aGlzLnNxbHN0YXRzcmVjb3JkLmN1cnJlbnRQYWdlTm8gKyAxIDogdG90YWxQYWdlQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnBhZ2luZ21ldGhvZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXR1cEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLmluaXQxMDEoKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgIH1dKTtcclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwYWdpbmdEaXJlY3RpdmVfYW5ndWxhcl9tb2R1bGU6IHBhZ2luZ0RpcmVjdGl2ZV9hbmd1bGFyX21vZHVsZVxyXG4gICAgfTtcclxuXHJcbn0oKTtcclxuXHJcblxyXG5cclxuZXhwb3J0IHsgcGFnaW5nRGlyZWN0aXZlX2luc3RhbmNlIH07XHJcblxyXG4iLCLvu79cclxuLy8gMDkvMTgvMjAxOSAwOTo0MyBhbSAtIFNTTiAtIFsyMDE5MDkxOC0wOTQzXSAtIFswMDFdIC0gQWRkaW5nIGpvYiBzdGF0dXMgb3B0aW9uIHRvIGluZGV4XHJcblxyXG5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdHlwZXMvYW5ndWxhci9pbmRleC5kLnRzXCIgLz5cclxuXHJcblxyXG5pbXBvcnQgKiBhcyBzc25fZ2xvYmFscyBmcm9tICcuLi9nbG9iYWxzJztcclxuXHJcblxyXG5pbnRlcmZhY2UgaUZpeFNjb3BlIGV4dGVuZHMgbmcuSVNjb3BlIHtcclxuICAgIGpvYl9zdGF0dXNfY2xpY2soZW50cnk6IGFueSk6IGFueSxcclxuICAgIGpvYl9zdGF0dXNfY2hlY2tlZChlbnRyeTogYW55KTogYW55XHJcbn07XHJcblxyXG5cclxudmFyIGpvYlN0YXR1c0RpcmVjdGl2ZV9pbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgdmFyIEpvYl9TdGF0dXNfQW5ndWxhcl9Nb2R1bGUgPSBzc25fZ2xvYmFscy5nbG9iYWxzX2luc3RhbmNlLmdldEluc3RhbmNlKFwidGltZXNoZWV0QXBwXCIpO1xyXG5cclxuXHJcbiAgICBKb2JfU3RhdHVzX0FuZ3VsYXJfTW9kdWxlLmNvbnRyb2xsZXIoXCJ1dGlsaXR5Q29udHJvbGxlclwiLCBbJyRzY29wZScsICdkYXRhU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGRhdGFTZXJ2aWNlKSB7XHJcblxyXG4gICAgfV0pO1xyXG5cclxuXHJcblxyXG4gICAgSm9iX1N0YXR1c19Bbmd1bGFyX01vZHVsZS5kaXJlY3RpdmUoJ2pvYlN0YXR1c09wdGlvbicsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkFcIixcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiL2pzL2pvYnMvam9iU3RhdHVzLmh0bWxcIixcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGVudHJ5OiBcIj1cIixcclxuICAgICAgICAgICAgICAgIGNoZWNrZWRmdW5jdGlvbjogXCImXCIsXHJcbiAgICAgICAgICAgICAgICBqb2JzdGF0dXNlc3NlbGVjdGVkMTAyOiBcIj1cIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlOiBpRml4U2NvcGUsIGVsLCBhdHRycykge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZS5qb2Jfc3RhdHVzX2NsaWNrID0gZnVuY3Rpb24gKGVudHJ5KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZGZ1bmN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuam9iX3N0YXR1c19jaGVja2VkID0gZnVuY3Rpb24gKGVudHJ5KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1NlbGVjdGVkID0gdGhpcy5qb2JzdGF0dXNlc3NlbGVjdGVkMTAyLmluZGV4T2YoZW50cnkuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1NlbGVjdGVkID4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIEpvYl9TdGF0dXNfQW5ndWxhcl9Nb2R1bGU6IEpvYl9TdGF0dXNfQW5ndWxhcl9Nb2R1bGVcclxuICAgIH07XHJcblxyXG59KCk7XHJcblxyXG5cclxuZXhwb3J0IHsgam9iU3RhdHVzRGlyZWN0aXZlX2luc3RhbmNlIH07XHJcbiIsIu+7v1xyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0eXBlcy9qcXVlcnkvanF1ZXJ5LmQudHNcIiAvPiBcclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdHlwZXMvYW5ndWxhci9pbmRleC5kLnRzXCIgLz4gXHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9EYXRhU2VydmljZXMudHNcIi8+XHJcblxyXG5cclxuXHJcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSAnYW5ndWxhcidcclxuaW1wb3J0IElDb2x1bW5CYWcgZnJvbSAnLi4vSUNvbHVtbkJhZyc7XHJcbmltcG9ydCAqIGFzIHNzbl9nbG9iYWxzIGZyb20gXCIuLi9nbG9iYWxzXCI7XHJcblxyXG5pbXBvcnQgeyBqb2JTdGF0dXNEaXNwbGF5RGlyZWN0aXZlX2luc3RhbmNlIH0gZnJvbSBcIi4uL1V0aWwvSm9iU3RhdHVzRGlzcGxheURpcmVjdGl2ZVwiO1xyXG5cclxuam9iU3RhdHVzRGlzcGxheURpcmVjdGl2ZV9pbnN0YW5jZTtcclxuXHJcblxyXG4vLyAwOS8yMS8yMDE5IDA0OjQyIGFtIC0gU1NOIC0gWzIwMTkwOTIxLTAzNTddIC0gWzAwM10gLSBDcmVhdGluZyBtdWx0aXBsZSBlbnRyeSBmb3IgV2VicGFja1xyXG5cclxudmFyIGpvYnNJbmRleENvbnRyb2xsZXJfaW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cclxuICAgIHZhciBKb2JzX0FuZ3VsYXJfTW9kdWxlOiBhbmd1bGFyLklNb2R1bGUgPSBzc25fZ2xvYmFscy5nbG9iYWxzX2luc3RhbmNlLmdldEluc3RhbmNlKFwidGltZXNoZWV0QXBwXCIpO1xyXG5cclxuICAgIEpvYnNfQW5ndWxhcl9Nb2R1bGUuY29udHJvbGxlcignam9ic0luZGV4Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJyRxJywgJ2RhdGFTZXJ2aWNlJywgJyR0aW1lb3V0JywgJyRzY2UnLCAnJHVpYk1vZGFsJyxcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcSwgZGF0YVNlcnZpY2UsICR0aW1lb3V0LCAkc2NlLCAkdWliTW9kYWwpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAvLyAwOS8xOC8yMDE5IDAxOjE1IGFtIC0gU1NOIC0gWzIwMTkwOTE3LTA5MjldIC0gWzAxMF0gLSBBZGRpbmcgcGFnaW5nIGZvciBhbmd1bGFyIGxpc3RzXHJcbiAgICAgICAgICAgIC8vJHNjb3BlLnNxbFN0YXRzUmVjb3JkID0ge307XHJcblxyXG4gICAgICAgICAgICAvLyAgU2V0dXAgaW50aWFpbCB2YWx1ZXMgZm9yIGxpc3RcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5qb2Jfc3RhdHVzZXNfc2VsZWN0ZWQgPSBbMV07IC8vIG9wZW5cclxuXHJcbiAgICAgICAgICAgIGxldCBjb2x1bW5CYWc6IElDb2x1bW5CYWcgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiAnZGF0ZUFkZGVkJyxcclxuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWVTZWxlY3RlZDogJ2RhdGVBZGRlZCcsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZU5vOiAxLFxyXG4gICAgICAgICAgICAgICAgZGVzYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlY29yZHNQZXJQYWdlOiA0LFxyXG4gICAgICAgICAgICAgICAgdG90YWxSZWNvcmRDb3VudDogMCxcclxuICAgICAgICAgICAgICAgIGNhcHRpb246IFwiRGF0ZSBBZGRlZFwiLFxyXG4gICAgICAgICAgICAgICAgam9iX3N0YXR1c2VzX3NlbGVjdGVkOiBbJHNjb3BlLmpvYl9zdGF0dXNlc19zZWxlY3RlZF1cclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgX2ZpZWxkTGlzdDogSUNvbHVtbkJhZ1tdID0gW1xyXG4gICAgICAgICAgICAgICAgeyAuLi5jb2x1bW5CYWcsIGNvbHVtbk5hbWU6ICdwcm9qZWN0VGl0bGVfRm9yQWN0aXZpdHknLCBjYXB0aW9uOiAnUHJvamVjdCBUaXRsZScgfSxcclxuICAgICAgICAgICAgICAgIHsgLi4uY29sdW1uQmFnLCBjb2x1bW5OYW1lOiAnam9iVGl0bGUnLCBjYXB0aW9uOiAnSm9iIFRpdGxlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyAuLi5jb2x1bW5CYWcsIGNvbHVtbk5hbWU6ICdkYXRlQWRkZWQnLCBjYXB0aW9uOiAnRGF0ZSBBZGRlZCcgfSxcclxuICAgICAgICAgICAgICAgIHsgLi4uY29sdW1uQmFnLCBjb2x1bW5OYW1lOiAnZGF0ZVVwZGF0ZWQnLCBjYXB0aW9uOiAnRGF0ZSBVcGRhdGVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyAuLi5jb2x1bW5CYWcsIGNvbHVtbk5hbWU6ICdhY3Rpdml0eUFnZScsIGNhcHRpb246ICdBY3Rpdml0eSBBZ2UnLCB9LFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5maWVsZHNMaXN0ID0gX2ZpZWxkTGlzdDtcclxuXHJcblxyXG4gICAgICAgICAgICBnZXRKb2JzTGlzdChjb2x1bW5CYWcpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRKb2JzTGlzdChjb2x1bW5CYWc6IElDb2x1bW5CYWcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhU2VydmljZS5nZXRKb2JzKGNvbHVtbkJhZykudGhlbihnZXRKb2JzU3VjY2VzcywgZ2V0Sm9ic0Vycm9yKS5jYXRjaChnZXRUaW1lbG9nQ2F0Y2gpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRKb2JzU3VjY2VzcyhkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhYmFnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2JzOiBkYXRhLmRhdGFMaXN0LCBjb2x1bW46IGRhdGEuY29sdW1uTmFtZSwgZGVzYzogZGF0YS5kZXNjXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBjb252ZXJ0IHRvIGFuIGFycmF5LiBXZSBkb24ndCBoYXZlIGEgc2V0dGVyIG9uIGFuIGludGVyZmFjZS5cclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnNxbFN0YXRzUmVjb3JkLmpvYl9zdGF0dXNlc19zZWxlY3RlZCA9IGRhdGEuc3FsU3RhdHNSZWNvcmQuam9iX3N0YXR1c2VzX3NlbGVjdGVkLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zcWxTdGF0c1JlY29yZCA9IGRhdGEuc3FsU3RhdHNSZWNvcmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sdW1uSW5kZXggPSAkc2NvcGUuZmllbGRzTGlzdC5maW5kSW5kZXgociA9PiByLmNvbHVtbiA9PT0gZGF0YS5jb2x1bW5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvbHVtbkluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpZWxkc0xpc3RbY3VycmVudENvbHVtbkluZGV4XS5kZXNjID0gZGF0YS5kZXNjO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRKb2JzRXJyb3IoZGF0YSkgeyB2YXIgdGVtcCA9IGRhdGE7IH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRUaW1lbG9nQ2F0Y2goZGF0YSkgeyB2YXIgdGVtcCA9IGRhdGE7IH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnNvcnRNZXRob2QxMDEgPSBmdW5jdGlvbiAoY29sdW1uQmFnOiBJQ29sdW1uQmFnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbkJhZy5jb2x1bW5OYW1lICE9IGNvbHVtbkJhZy5jb2x1bW5OYW1lU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5CYWcuY29sdW1uTmFtZVNlbGVjdGVkID0gY29sdW1uQmFnLmNvbHVtbk5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5CYWcuZGVzYyA9ICFjb2x1bW5CYWcuZGVzYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdldEpvYnNMaXN0KGNvbHVtbkJhZyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luZ21ldGhvZDEwMSA9IGZ1bmN0aW9uIChjb2x1bW5CYWc6IElDb2x1bW5CYWcpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZ2V0Sm9ic0xpc3QoY29sdW1uQmFnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3FsU3RhdHNSZWNvcmQgPSBjb2x1bW5CYWc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIDA5LzIyLzIwMTkgMTA6NDcgYW0gLSBTU04gLSBbMjAxOTA5MjItMDgyMl0gLSBbMDA3XSAtIFBsdWcgaW4gam9iIHN0YXR1cyBmaWx0ZXIgb24gam9iJ3MgaW5kZXggLSB1cGRhdGUgZGF0YSBzb3VyY2VcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5qb2Jfc3RhdHVzX2NoYW5nZWQxMDEgPSBmdW5jdGlvbiAoam9iX3N0YXR1cykge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbmRleE9mU2VsZWN0ZWRJdGVtID0gJHNjb3BlLmpvYl9zdGF0dXNlc19zZWxlY3RlZC5pbmRleE9mKGpvYl9zdGF0dXMuaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbmRleE9mU2VsZWN0ZWRJdGVtID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmpvYl9zdGF0dXNlc19zZWxlY3RlZC5zcGxpY2UoaW5kZXhPZlNlbGVjdGVkSXRlbSwgMSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmpvYl9zdGF0dXNlc19zZWxlY3RlZFskc2NvcGUuam9iX3N0YXR1c2VzX3NlbGVjdGVkLmxlbmd0aF0gPSBqb2Jfc3RhdHVzLmlkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc3FsU3RhdHNSZWNvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3FsU3RhdHNSZWNvcmQuam9iX3N0YXR1c2VzX3NlbGVjdGVkID0gJHNjb3BlLmpvYl9zdGF0dXNlc19zZWxlY3RlZDsgLy8uam9pbignLCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbHVtbkJhZy5qb2Jfc3RhdHVzZXNfc2VsZWN0ZWQgPSAkc2NvcGUuc3FsU3RhdHNSZWNvcmQuam9iX3N0YXR1c2VzX3NlbGVjdGVkO1xyXG5cclxuICAgICAgICAgICAgICAgIGdldEpvYnNMaXN0KGNvbHVtbkJhZyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gMDkvMjIvMjAxOSAwNToyMCBhbSAtIFNTTiAtIFsyMDE5MDkyMS0xMTI5XSAtIFswMDddIC0gUGx1ZyBpbiBqb2Igc3RhdHVzIGZpbHRlciBvbiBqb2IncyBpbmRleFxyXG5cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5qb2Jfc3RhdHVzZXNfY2hlY2tBbGwgPSBmdW5jdGlvbiAoZW5hYmxlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVuYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5qb2Jfc3RhdHVzZXNfc2VsZWN0ZWQgPSAkc2NvcGUuam9iX3N0YXR1c2VzLm1hcChmdW5jdGlvbiAoam9iX3N0YXR1cykgeyByZXR1cm4gam9iX3N0YXR1cy5pZCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5qb2Jfc3RhdHVzZXNfc2VsZWN0ZWQgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb2x1bW5CYWcuam9iX3N0YXR1c2VzX3NlbGVjdGVkID0gJHNjb3BlLmpvYl9zdGF0dXNlc19zZWxlY3RlZFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBnZXRKb2JzTGlzdChjb2x1bW5CYWcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gMDkvMjgvMjAxOSAwNDowNiBwbSAtIFNTTiAtIFsyMDE5MDkyOC0xMjU2XSAtIFswMTFdIC0gQWRkaW5nIEVudGl0eSBGcmFtZXdvcmsgbW9kZWwgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIC8vIER1cGxpY2F0ZSAtIFdyb25nIHdheSB0byBnbyFcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zaG93Q3JlYXRlVGltZXNoZWV0Rm9ybSA9IGZ1bmN0aW9uIChqb2JJRCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKb2JJbmRleENvbnRyb2xsZXIgLSAyMDE5MDkzMC0xNjUxIENDQ0NDIC0gc2hvd0NyZWF0ZVRpbWVzaGVldEZvcm0gJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGpvYklEKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpvYklEID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvanMvdGltZXNoZWV0L3RlbXBsYXRlcy90aW1lc2hlZXRUZW1wbGF0ZS5odG1sJyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RpbWVzaGVldENvbnRyb2xsZXInLFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2Ryb3A6IGZhbHNlLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYklkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gam9iSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEpvYl9TdGF0dXNlcygpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhU2VydmljZS5nZXRKb2JfU3RhdHVzZXMoKS50aGVuKGdldEpvYl9TdGF0dXNlc1N1Y2Nlc3MsIGdldEpvYl9TdGF0dXNlc0Vycm9yKS5jYXRjaChnZXRKb2JfU3RhdHVzZXNDYXRjaCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEpvYl9TdGF0dXNlc1N1Y2Nlc3MoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5qb2Jfc3RhdHVzZXMgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRKb2JfU3RhdHVzZXNFcnJvcihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJKb2JJbmRleENvbnRyb2xsZXIgLSAgMjAxOTA5MjItMDc1OCAtIERhdGEgZXJyb3IgPz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEpvYl9TdGF0dXNlc0NhdGNoKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkpvYkluZGV4Q29udHJvbGxlciAtICAyMDE5MDkyMi0wNzU4IC0gRGF0YSBlcnJvciAoY2F0Y2gpID8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2V0Sm9iX1N0YXR1c2VzKCk7XHJcblxyXG5cclxuICAgICAgICB9XVxyXG5cclxuICAgICk7XHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgSm9ic19Bbmd1bGFyX01vZHVsZTogSm9ic19Bbmd1bGFyX01vZHVsZVxyXG4gICAgfVxyXG5cclxuXHJcbn0oKTtcclxuXHJcblxyXG5cclxuZXhwb3J0IHsgam9ic0luZGV4Q29udHJvbGxlcl9pbnN0YW5jZSB9O1xyXG5cclxuIiwi77u/XHJcblxyXG5pbXBvcnQgKiBhcyBnbG9iYWxzIGZyb20gXCIuLi9nbG9iYWxzXCI7XHJcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSBcImFuZ3VsYXJcIjtcclxuaW1wb3J0ICogYXMgdG9zdHIgZnJvbSBcInRvYXN0clwiO1xyXG5cclxuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0eXBlcy90b2FzdHIvaW5kZXguZC50c1wiIC8+XHJcblxyXG4vLyAwNC8xMi8yMDE5IDAzOjU3IGFtIC0gU1NOIC0gWzIwMTkwNDEyLTAxNDJdIC0gVGltZXNoZWV0QXBwXHJcblxyXG4vLyAwOS8xOC8yMDE5IDExOjEzIGFtIC0gU1NOIC0gWzIwMTkwOTE4LTA5NDNdIC0gWzAwOF0gLSBBZGRpbmcgam9iIHN0YXR1cyBvcHRpb24gdG8gaW5kZXhcclxuXHJcblxyXG52YXIgdGltZXNoZWV0Q29udHJvbGxlcl9pbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgdGltZXNoZWV0QXBwID0gZ2xvYmFscy5nbG9iYWxzX2luc3RhbmNlLmdldEluc3RhbmNlKFwidGltZXNoZWV0QXBwXCIpO1xyXG5cclxuXHJcbiAgICB0aW1lc2hlZXRBcHAuY29udHJvbGxlcignVGltZXNoZWV0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyR1aWJNb2RhbEluc3RhbmNlJywgJyRodHRwJywgJyRxJywgJ2RhdGFTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiBUaW1lc2hlZXRDb250cm9sbGVyKCRzY29wZSwgJHVpYk1vZGFsSW5zdGFuY2UsICRodHRwLCAkcSwgZGF0YVNlcnZpY2UsIGpvYklkKSB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5kaXNjaXBsaW5lU2VsZWN0ZWQgPSB7IGlkOiAwLCB0aXRsZTogJycgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIDA1LzAzLzIwMTkgMDU6NTQgcG0gLSBTU04gLSBbMjAxOTA1MDMtMTUzOV0gLSBbMDEyXSAtIEFkZCBsaW5rIHRvIGNyZWF0ZSB0aW1lbG9nIFxyXG4gICAgICAgICAgICAvLyBBZGQgcGFnZVRpdGxlXHJcbiAgICAgICAgICAgICRzY29wZS5wYWdlVGl0bGUgPSBcIkNsb2NrLWluXCI7XHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IHRpbWVOb3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB0aW1lTm93LnNldE1pbGxpc2Vjb25kcygwKTtcclxuICAgICAgICAgICAgLy8gdGltZU5vdy5zZXRTZWNvbmRzKDApO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnRpbWVMb2cgPSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lTG9nSWQ6IDAsXHJcbiAgICAgICAgICAgICAgICBpZDogMCxcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogdGltZU5vdyxcclxuICAgICAgICAgICAgICAgIHdvcmtEZXRhaWw6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBkaXNjaXBsaW5lSWQ6ICcyJyxcclxuICAgICAgICAgICAgICAgIGpvYklkOiBqb2JJZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0YWJsZVRpbWVMb2cgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLnRpbWVMb2cpO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRlc3QgPSAkc2NvcGUuZWRpdGFibGVUaW1lTG9nO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGFibGVUaW1lTG9nLmRpc2NpcGxpbmVJZCA9ICRzY29wZS5kaXNjaXBsaW5lU2VsZWN0ZWQuaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0YWJsZVRpbWVMb2cuaWQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gZGF0YVNlcnZpY2UuaW5zZXJ0VGltZUxvZygkc2NvcGUuZWRpdGFibGVUaW1lTG9nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSBkYXRhU2VydmljZS51cGRhdGVUaW1lTG9nKCRzY29wZS5lZGl0YWJsZVRpbWVMb2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9taXNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdDEgPSBkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50aW1lTG9nID0gYW5ndWxhci5jb3B5KCRzY29wZS5lZGl0YWJsZVRpbWVMb2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdDIgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGltZXNoZWV0Q29udHJvbGxlciAtIDIwMTkwOTIxLTA2NDAgLSBwcm9taXNlID4gZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuaW5mbyhcIkNsb2NrZWQtaW5cIik7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2FuY2VsRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygpOyAvL3NhbWUgYXMgY2FuY2VsPz8/XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAvLyAwNC8xMy8yMDE5IDExOjAwIGFtIC0gU1NOIC0gWzIwMTkwNDEzLTEwMzddIC0gQWRkIGRpc2NpcGxpbmUgbG9va3VwXHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0RGlzY2lwbGluZXMgPSBmdW5jdGlvbiAobG9va3VwVmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobG9va3VwVmFsdWUgPT09IG51bGwpIGxvb2t1cFZhbHVlID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgLy8gMDUvMDMvMjAxOSAwNDoxNiBwbSAtIFNTTiAtIFsyMDE5MDUwMy0xNTM5XSAtIFswMDZdIC0gQWRkIGxpbmsgdG8gY3JlYXRlIHRpbWVsb2dcclxuICAgICAgICAgICAgICAgIC8vIGZyb20gICB1cmw6ICAnYXBpL0Rpc2NpcGxpbmVBUEknXHJcbiAgICAgICAgICAgICAgICAvLyAgIHRvICAgdXJsOiAnL2FwaS9EaXNjaXBsaW5lQVBJJ1xyXG5cclxuICAgICAgICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvRGlzY2lwbGluZUFQSSdcclxuXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKHR5cGVhaGVhZERpc2NpcGxpbmVTdWNjZXNzLCB0eXBlYWhlYWREaXNjaXBsaW5lRXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHR5cGVhaGVhZERpc2NpcGxpbmVTdWNjZXNzKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhZGRyZXNzZXMgPSBbXTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFuZ3VsYXIgLSBmb3JFYWNoIC0gMjAxOTA5MjAtMDcyMC1vXCIpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXNwb25zZS5kYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoaXRlbSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmRpc2NpcGxpbmVTaG9ydC50b0xvd2VyQ2FzZSgpLmluZGV4T2YobG9va3VwVmFsdWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nlcy5wdXNoKHsgaWQ6IGl0ZW0uZGlzY2lwbGluZUlkLCB0aXRsZTogaXRlbS5kaXNjaXBsaW5lU2hvcnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGFkZHJlc3Nlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHR5cGVhaGVhZERpc2NpcGxpbmVFcnJvcihyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRpbWVzaGVldEFwcF9UaW1lc2hlZXRDb250cm9sbGVyOiB0aW1lc2hlZXRBcHBcclxuICAgIH07XHJcblxyXG59KCk7XHJcblxyXG5cclxuZXhwb3J0IHsgdGltZXNoZWV0Q29udHJvbGxlcl9pbnN0YW5jZSB9O1xyXG5cclxuIiwi77u/XHJcblxyXG4vLyAwNC8xMi8yMDE5IDAyOjM1IHBtIC0gU1NOIC0gWzIwMTkwNDEyLTExMjZdIC0gVGltZWxvZyAtIHNhdmUgZGF0YSAtIFJlbmFtZSBtb2R1bGUgdG8gc3NuX2RldnNpdGVfYW5ndWxhcl9tb2R1bGVcclxuXHJcblxyXG4vLyAwNS8wNC8yMDE5IDA5OjI2IGFtIC0gU1NOIC0gWzIwMTkwNTA0LTA4NTVdIC0gWzAwNF0gLSBUZXN0aW5nIGlmIHdlIGNhbiByZXBsYWNlIGdsb2JhbCB2YXJpYWJsZVxyXG4vLyBDb252ZXJ0IHRvIFR5cGVTY3JpcHRcclxuLy8gMDUvMDQvMjAxOSAwOTo1OCBhbSAtIFNTTiAtIFNpbmNlIGhhdmluZyB0byBpbXBvcnQgYW5ndWxhciB3aGVuIGNvbnZlcnRpbmcgdG8gYSBtb2R1bGVcclxuXHJcblxyXG5pbXBvcnQgKiBhcyAgIElDb2x1bW5CYWdUZW1wIGZyb20gJy4vSUNvbHVtbkJhZyc7XHJcblxyXG5pbXBvcnQgKiBhcyAgIGdsb2JhbHMgZnJvbSAnLi9nbG9iYWxzJztcclxuXHJcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSBcImFuZ3VsYXJcIjtcclxuXHJcblxyXG5cclxudmFyIGRhdGFTZXJ2aWNlX2luc3RhbmNlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICB2YXIgZG9TZXR1cCA9IGZ1bmN0aW9uIChjdXJyZW50QXBwbGljYXRpb246IHN0cmluZykge1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNzbl9kZXZzaXRlX2FuZ3VsYXJfbW9kdWxlID0gZ2xvYmFscy5nbG9iYWxzX2luc3RhbmNlLmdldEluc3RhbmNlKGN1cnJlbnRBcHBsaWNhdGlvbik7XHJcblxyXG5cclxuICAgICAgICBzc25fZGV2c2l0ZV9hbmd1bGFyX21vZHVsZS5mYWN0b3J5KFwiZGF0YVNlcnZpY2VcIiwgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfZGV2U2l0ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBfZ2V0RGV2U2l0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2RlbW9zaXRlc2FwaScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KHJlc3VsdC5kYXRhLCBfZGV2U2l0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIDA0LzI5LzIwMTkgMDU6NDkgcG0gLSBTU04gLSBbMjAxOTA0MjktMTc0OF0gLSBbMDAxXSAtIEFuZ3VsYXIgY2xvY2sgb3V0IHBvcHVwXHJcblxyXG4gICAgICAgICAgICB2YXIgX2dldFRpbWVsb2cgPSBmdW5jdGlvbiAoaWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuLy8gMDkvMjQvMjAxOSAwNzoxNSBhbSAtIFNTTiAtIFsyMDE5MDkyNC0wNDAxXSAtIFswMDldIC0gUXVpY2sgdGltZWxvZyBlbnRyeVxyXG5cclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS90aW1lbG9nYXBpL2dldF9jdXN0b20vJyArIGlkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCh7IEVycm9yOiAnRmFpbGVkIGNhbGwgdG8gZ2V0IHRpbWVsb2cgWzIwMTkwODI5LTE4MTldJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIF9hZGREZXZTaXRlID0gZnVuY3Rpb24gKGRldlNpdGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZGVtb3NpdGVzYXBpJywgZGV2U2l0ZSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIDA5LzA2LzIwMTkgMDQ6NDUgcG0gLSBTU04gLSBbMjAxOTA5MDYtMDUxOF0gLSBbMDAzXSAtIEFuZ3VsYXIgLSBlZGl0TW9kZSBkaXYgY29udGVudFxyXG4gICAgICAgICAgICB2YXIgX3VwZGF0ZURldlNpdGUgPSBmdW5jdGlvbiAoZGV2U2l0ZSkge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIDA5LzA5LzIwMTkgMTA6MzMgcG0gLSBTU04gLSBbMjAxOTA5MDktMjEzNl0gLSBbMDA0XSAtIHNlbGVjdCB0b3AgMjAgXHJcbiAgICAgICAgICAgICAgICAvLyAwOS8yNC8yMDE5IDAzOjM4IGFtIC0gU1NOIC0gTG9naWMgZXJyb3IgLSB1cGRhdGluZyB3cm9uZyBsaW5rXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2RlbW9zaXRlc2FwaScsIGRldlNpdGUpXHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2RlbW9zaXRlc2FwaScsIGRldlNpdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICAvLyAwNC8xMi8yMDE5IDExOjI2IGFtIC0gU1NOIC0gWzIwMTkwNDEyLTExMjZdIC0gVGltZWxvZyAtIHNhdmUgZGF0YVxyXG5cclxuICAgICAgICAgICAgdmFyIF9pbnNlcnRUaW1lTG9nID0gZnVuY3Rpb24gKHRpbWVMb2cpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvdGltZUxvZ0FQSScsIHRpbWVMb2cpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gMDUvMTkvMjAxOSAwMzowMCBwbSAtIFNTTiAtIFsyMDE5MDUxOS0xNDEyXSAtIFswMDRdIC0gQ29udGludWUgd29yayBvbiBhZGRpbmcgY29udGludWUgb3B0aW9uIGZvciB0aW1lc2hlZXQgcmVjb3JkXHJcbiAgICAgICAgICAgIHZhciBfYWRkT3JVcGRhdGVUaW1lTG9nID0gZnVuY3Rpb24gKHRpbWVMb2cpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3RpbWVMb2dBUEknLCB0aW1lTG9nKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gMDkvMTcvMjAxOSAxMjo1NiBhbSAtIFNTTiAtIFsyMDE5MDkxNi0xMTIzXSAtIFswMTZdIC0gQWRkaW5nIGpvYiBzdGF0dXNcclxuICAgICAgICAgICAgLy8gQWRkaW5nIG9wdGlvbiB0byBsaXN0IEpvYnNcclxuXHJcbiAgICAgICAgICAgIC8vIDA5LzE4LzIwMTkgMDM6MjQgYW0gLSBTU04gLSBbMjAxOTA5MTctMDkyOV0gLSBbMDE3XSAtIEFkZGluZyBwYWdpbmcgZm9yIGFuZ3VsYXIgbGlzdHNcclxuICAgICAgICAgICAgLy8gdmFyIF9nZXRKb2JzID0gZnVuY3Rpb24gKHBhZ2VObywgcmVjb3Jkc1BlclBhZ2UsIGNvbHVtbk5hbWUsIGRlc2MpIHtcclxuICAgICAgICAgICAgdmFyIF9nZXRKb2JzID0gZnVuY3Rpb24gKGNvbHVtbkJhZzogSUNvbHVtbkJhZ1RlbXAuZGVmYXVsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gMDkvMjIvMjAxOSAwODoyMyBhbSAtIFNTTiAtIFsyMDE5MDkyMi0wODIyXSAtIFswMDFdIC0gUGx1ZyBpbiBqb2Igc3RhdHVzIGZpbHRlciBvbiBqb2IncyBpbmRleCAtIHVwZGF0ZSBkYXRhIHNvdXJjZVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBqb2Jfc3RhdHVzZXNfc2VsZWN0ZWQgPSAoKGNvbHVtbkJhZy5qb2Jfc3RhdHVzZXNfc2VsZWN0ZWQubGVuZ3RoID09IDApID8gXCJub3RoaW5nLTIwMTkwOTIyMTExN1wiIDogY29sdW1uQmFnLmpvYl9zdGF0dXNlc19zZWxlY3RlZC5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9qb2JhcGkvbGlzdC8nICsgY29sdW1uQmFnLmN1cnJlbnRQYWdlTm8gKyBcIi9cIiArIGNvbHVtbkJhZy5yZWNvcmRzUGVyUGFnZSArIFwiL1wiICsgY29sdW1uQmFnLmNvbHVtbk5hbWUgKyBcIi9cIiArIGNvbHVtbkJhZy5kZXNjICsgXCIvXCIgKyBqb2Jfc3RhdHVzZXNfc2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHsgRXJyb3I6ICdGYWlsZWQgY2FsbCB0byBnZXQgam9icyBbMjAxOTA5MTctMDA1N10nIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICAvLyAwOS8yMS8yMDE5IDAxOjI1IHBtIC0gU1NOIC0gWzIwMTkwOTIxLTExMjldIC0gWzAwM10gLSBQbHVnIGluIGpvYiBzdGF0dXMgZmlsdGVyIG9uIGpvYidzIGluZGV4XHJcblxyXG4gICAgICAgICAgICB2YXIgX2dldEpvYl9TdGF0dXNlcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9qb2Jfc3RhdHVzQVBJLycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHsgRXJyb3I6ICdGYWlsZWQgY2FsbCB0byBnZXQgam9iX3N0YXR1c2VzIFsyMDE5MDkyMS0xMzI2JyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgICAgICAgICAgZGV2U2l0ZXM6IGtvLm9ic2VydmFibGUoX2RldlNpdGVzKSxcclxuICAgICAgICAgICAgICAgIGdldERldlNpdGVzOiBfZ2V0RGV2U2l0ZXMsXHJcbiAgICAgICAgICAgICAgICBhZGREZXZTaXRlOiBfYWRkRGV2U2l0ZSxcclxuICAgICAgICAgICAgICAgIC8vIDA5LzA2LzIwMTkgMDQ6NDQgcG0gLSBTU04gLSBbMjAxOTA5MDYtMDUxOF0gLSBbMDAyXSAtIEFuZ3VsYXIgLSBlZGl0TW9kZSBkaXYgY29udGVudFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGV2U2l0ZTogX3VwZGF0ZURldlNpdGUsXHJcblxyXG4gICAgICAgICAgICAgICAgaW5zZXJ0VGltZUxvZzogX2luc2VydFRpbWVMb2csXHJcbiAgICAgICAgICAgICAgICBnZXRUaW1lbG9nOiBfZ2V0VGltZWxvZyxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWVMb2c6IF9hZGRPclVwZGF0ZVRpbWVMb2csXHJcbiAgICAgICAgICAgICAgICBnZXRKb2JzOiBfZ2V0Sm9icyxcclxuICAgICAgICAgICAgICAgIGdldEpvYl9TdGF0dXNlczogX2dldEpvYl9TdGF0dXNlc1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgfV0pO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIC8vICAgICAgICBzc25fZGV2c2l0ZV9hbmd1bGFyX21vZHVsZTogc3NuX2RldnNpdGVfYW5ndWxhcl9tb2R1bGVcclxuICAgICAgICBkb1NldHVwOiBkb1NldHVwXHJcbiAgICB9O1xyXG5cclxuXHJcbn0oKTtcclxuXHJcblxyXG5cclxuZXhwb3J0IHsgZGF0YVNlcnZpY2VfaW5zdGFuY2UgfTtcclxuXHJcblxyXG4iLCLvu79cclxuLy8gMDkvMjIvMjAxOSAxMjo0NSBwbSAtIFNTTiAtIFsyMDE5MDkyMi0wODIyXSAtIFswMDhdIC0gUGx1ZyBpbiBqb2Igc3RhdHVzIGZpbHRlciBvbiBqb2IncyBpbmRleCAtIHVwZGF0ZSBkYXRhIHNvdXJjZVxyXG5cclxuXHJcbmltcG9ydCAqIGFzIHNzbl9nbG9iYWxzIGZyb20gXCIuLi9nbG9iYWxzXCI7XHJcblxyXG52YXIgam9iU3RhdHVzRGlzcGxheURpcmVjdGl2ZV9pbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgYXBwID0gc3NuX2dsb2JhbHMuZ2xvYmFsc19pbnN0YW5jZS5nZXRJbnN0YW5jZSgndGltZXNoZWV0QXBwJyk7XHJcblxyXG4gICAgdmFyIGpvYlN0YXR1c0Rpc3BsYXkgPSBhcHAuZGlyZWN0aXZlKCdqb2JTdGF0dXNEaXNwbGF5JywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0cnNbJ2pvYlN0YXR1cyddLCBmdW5jdGlvbiAobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PSAnMScpIGNsYXNzTmFtZSA9ICdqb2Jfc3RhdHVzX29wZW5fMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT0gJzInKSBjbGFzc05hbWUgPSAnam9iX3N0YXR1c19QZW5kaW5nXzInO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID09ICczJykgY2xhc3NOYW1lID0gJ2pvYl9zdGF0dXNfQ29tcGxldGVkXzMnO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgY2xhc3NOYW1lID0gJ2pvYl9zdGF0dXNfQ2FuY2VsbGVkXzQnO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2xhc3MoJ2pvYl9zdGF0dXNfb3Blbl8xIGpvYl9zdGF0dXNfUGVuZGluZ18yIGpvYl9zdGF0dXNfQ29tcGxldGVkXzMgam9iX3N0YXR1c19DYW5jZWxsZWRfNCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmFkZENsYXNzKGNsYXNzTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBqb2JTdGF0dXNEaXNwbGF5OiBqb2JTdGF0dXNEaXNwbGF5XHJcbiAgICB9O1xyXG5cclxuXHJcbn0oKTtcclxuXHJcbmV4cG9ydCB7IGpvYlN0YXR1c0Rpc3BsYXlEaXJlY3RpdmVfaW5zdGFuY2UgfTtcclxuXHJcblxyXG4iLCJcclxuLy8gMDkvMjEvMjAxOSAxMTozMSBhbSAtIFNTTiAtIFsyMDE5MDkyMS0xMTI5XSAtIFswMDJdIC0gUGx1ZyBpbiBqb2Igc3RhdHVzIGZpbHRlciBvbiBqb2IncyBpbmRleFxyXG5cclxuXHJcbmltcG9ydCB7IGhlYWRlcldpdGhTb3J0X2luc3RhbmNlIH0gZnJvbSAnLi4vVXRpbC9IZWFkZXJXaXRoU29ydCc7XHJcbmltcG9ydCB7IHBhZ2luZ0RpcmVjdGl2ZV9pbnN0YW5jZSB9IGZyb20gJy4uL1V0aWwvcGFnaW5nRGlyZWN0aXZlJztcclxuaW1wb3J0IHsgZGF0YVNlcnZpY2VfaW5zdGFuY2UgfSBmcm9tICcuLi9EYXRhU2VydmljZXMnO1xyXG5pbXBvcnQgeyBqb2JTdGF0dXNEaXJlY3RpdmVfaW5zdGFuY2UgfSBmcm9tICcuL0pvYlN0YXR1c0RpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IGpvYnNJbmRleENvbnRyb2xsZXJfaW5zdGFuY2UgfSBmcm9tICcuLi9Kb2JzL0pvYnNJbmRleENvbnRyb2xsZXInO1xyXG5cclxuXHJcblxyXG5pbXBvcnQgeyB0aW1lc2hlZXRDb250cm9sbGVyX2luc3RhbmNlIH0gZnJvbSAnLi4vVGltZXNoZWV0L1RpbWVzaGVldENvbnRyb2xsZXInO1xyXG5cclxuXHJcbi8vaW1wb3J0IHsgdGltZXNoZWV0QXBwX2luc3RhbmNlIH0gZnJvbSAnLi4vVGltZXNoZWV0L1RpbWVzaGVldEFwcCc7ICAvLyBmb3IgdGltZXNoZWV0IHJlbGF0ZWQgbGlua3NcclxuLy9pbXBvcnQgeyB0aW1lc2hlZXRDb250aW51ZUNvbnRyb2xsZXJfaW5zdGFuY2UgfSBmcm9tICcuLi9UaW1lc2hlZXQvdGltZXNoZWV0Y29udGludWVjb250cm9sbGVyJztcclxuLy9pbXBvcnQgeyB0aW1lc2hlZXRDbG9ja291dENvbnRyb2xsZXJfaW5zdGFuY2UgfSBmcm9tICcuLi9UaW1lc2hlZXQvdGltZXNoZWV0Y2xvY2tvdXRjb250cm9sbGVyJztcclxuXHJcblxyXG5kYXRhU2VydmljZV9pbnN0YW5jZS5kb1NldHVwKFwidGltZXNoZWV0QXBwXCIpO1xyXG5cclxuam9ic0luZGV4Q29udHJvbGxlcl9pbnN0YW5jZS5Kb2JzX0FuZ3VsYXJfTW9kdWxlO1xyXG5cclxuaGVhZGVyV2l0aFNvcnRfaW5zdGFuY2UuaGVhZGVyV2l0aFNvcnRfYW5ndWxhcl9tb2R1bGU7XHJcblxyXG5wYWdpbmdEaXJlY3RpdmVfaW5zdGFuY2UucGFnaW5nRGlyZWN0aXZlX2FuZ3VsYXJfbW9kdWxlO1xyXG5cclxuam9iU3RhdHVzRGlyZWN0aXZlX2luc3RhbmNlLkpvYl9TdGF0dXNfQW5ndWxhcl9Nb2R1bGU7XHJcblxyXG5cclxudGltZXNoZWV0Q29udHJvbGxlcl9pbnN0YW5jZS50aW1lc2hlZXRBcHBfVGltZXNoZWV0Q29udHJvbGxlcjtcclxuXHJcbi8vdGltZXNoZWV0Q29udGludWVDb250cm9sbGVyX2luc3RhbmNlO1xyXG5cclxuLy90aW1lc2hlZXRDbG9ja291dENvbnRyb2xsZXJfaW5zdGFuY2U7XHJcblxyXG4vL3RpbWVzaGVldEFwcF9pbnN0YW5jZS50aW1lc2hlZXRBcHA7XHJcbiBcclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==